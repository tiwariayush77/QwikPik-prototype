<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QwikPik - AI-Powered Social Shopping Assistant</title>
    <style>
        /* Enhanced Design System with Social Features */
        :root {
            --color-primary: #4285f4;
            --color-success: #34a853;
            --color-warning: #fbbc04;
            --color-error: #ea4335;
            --color-bg: #f8f9fa;
            --color-surface: #ffffff;
            --color-text: #202124;
            --color-text-secondary: #5f6368;
            --color-border: #dadce0;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.15);
            --radius: 12px;
            --space: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            line-height: 1.5;
        }

        .app {
            min-height: 100vh;
        }

        /* Navigation */
        .main-nav {
            background: var(--color-surface);
            border-bottom: 1px solid var(--color-border);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(8px);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .brand-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--color-primary);
        }

        .nav-actions {
            display: flex;
            gap: 8px;
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: transparent;
            border: 1px solid var(--color-border);
            border-radius: var(--radius);
            color: var(--color-text);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .nav-btn:hover {
            background: var(--color-bg);
        }

        .nav-btn.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        /* Screen Management */
        .screen {
            display: none;
            padding: var(--space) 0;
        }

        .screen.active {
            display: block;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space);
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, var(--color-primary), var(--color-success));
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-bottom: 32px;
        }

        .hero-title {
            font-size: 2.5rem;
            margin-bottom: 16px;
            font-weight: 700;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 24px;
        }

        .social-proof {
            display: flex;
            justify-content: center;
            gap: 24px;
            font-size: 14px;
            opacity: 0.8;
        }
	
        /* Search Section */
        .search-section {
            background: var(--color-surface);
            padding: 24px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 24px;
            position: relative;
        }

        .search-box {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .search-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--color-border);
            border-radius: 24px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
        }
        
        .voice-btn {
            width: 48px;
            height: 48px;
            border: none;
            background: var(--color-error);
            color: white;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s;
        }
        .voice-btn:hover {
            transform: scale(1.05);
        }

        .voice-btn.listening {
            background: var(--color-success);
            animation: pulse 1s infinite;
        }

        .search-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 24px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: #3367d6;
            transform: translateY(-1px);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .quick-suggestions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 12px;
        }

        .suggestion-chip {
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .suggestion-chip:hover {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        /* [ENHANCED] Search Results Layout */
        .search-results-container {
            background: var(--color-surface);
            border-radius: var(--radius);
            margin-top: 20px;
            box-shadow: var(--shadow);
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.4s ease;
        }

        .search-results-container.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .results-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .results-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .results-count {
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        .results-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        /* [ENHANCED] Prominent Filters Section */
        .filters-section {
            background: linear-gradient(135deg, #f8f9ff, #fff3e0);
            border: 2px solid var(--color-primary);
            border-radius: var(--radius);
            margin: 20px 24px;
            position: relative;
            overflow: hidden;
        }
        
        .filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: rgba(66, 133, 244, 0.1);
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .filters-header:hover {
            background: rgba(66, 133, 244, 0.15);
        }
        
        .filters-title {
            font-weight: 700;
            font-size: 16px;
            color: var(--color-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .filters-title::before {
            content: '🔧';
            font-size: 18px;
        }
        
        .filters-header .filters-title::after {
            content: ' ▼';
            font-size: 12px;
            margin-left: 8px;
            display: inline-block;
            transition: transform 0.3s ease;
        }
        
        .filters-section.expanded .filters-header .filters-title::after {
            transform: rotate(180deg);
        }
        
        .filters-content {
            padding: 0 24px;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: all 0.4s ease;
        }
        
        .filters-section.expanded .filters-content {
            padding: 20px 24px;
            max-height: 500px;
            opacity: 1;
        }

        .clear-filters {
            background: var(--color-error);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .clear-filters:hover {
            background: #c5221f;
            transform: translateY(-1px);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .filter-group-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--color-primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .filter-options {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .filter-chip {
            background: white;
            border: 2px solid var(--color-border);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .filter-chip:hover {
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(66, 133, 244, 0.2);
        }

        .filter-chip.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(66, 133, 244, 0.3);
        }

        .sort-dropdown {
            padding: 10px 16px;
            border: 2px solid var(--color-border);
            border-radius: var(--radius);
            background: white;
            font-size: 14px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .sort-dropdown:hover {
            border-color: var(--color-primary);
        }
        
        /* ADDED: Recommended Strip Styling */
        .recommended-strip {
            padding: 24px;
            border-bottom: 2px solid var(--color-primary);
            background: linear-gradient(135deg, #e8f0fe, #fff3e0);
        }
        .recommended-strip h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--color-primary);
            text-align: center;
        }
        .recommended-strip .products-grid {
            padding: 0;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }

        /* [ENHANCED] Products Grid & Cards */
        .products-grid {
            padding: 24px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
        }

        .product-card {
            background: var(--color-surface);
            border: 2px solid var(--color-border);
            border-radius: var(--radius);
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .product-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-6px);
            border-color: var(--color-primary);
        }

        .product-image-placeholder {
            height: 180px;
            background: linear-gradient(135deg, var(--color-bg), #e8f0fe);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            position: relative;
        }

        .confidence-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--color-success);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(52, 168, 83, 0.3);
        }
        .product-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .product-brand {
            background: var(--color-primary);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .product-name {
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 12px;
            line-height: 1.3;
            color: var(--color-text);
        }

        .product-price {
            color: var(--color-success);
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .original-price {
            color: var(--color-text-secondary);
            text-decoration: line-through;
            font-size: 16px;
            font-weight: 500;
        }

        .discount-badge {
            background: var(--color-error);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
        }
        
        /* ADDED: Trust Breakdown Styling */
        .trust-breakdown {
            display: flex;
            gap: 12px;
            font-size: 12px;
            color: var(--color-text-secondary);
            margin-bottom: 16px;
            background: var(--color-bg);
            padding: 8px;
            border-radius: 8px;
        }
        
        .trust-breakdown span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .vibe-tags {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .vibe-tag {
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 500;
            color: var(--color-text-secondary);
        }

        .vibe-tag.highlight {
            background: var(--color-warning);
            color: var(--color-text);
            border-color: var(--color-warning);
            font-weight: 700;
        }

        /* [ENHANCED] Product Action Buttons */
        .product-actions {
            margin-top: auto;
            border-top: 2px solid var(--color-border);
            padding-top: 16px;
        }

        .primary-action {
            margin-bottom: 12px;
        }

        .primary-btn {
            width: 100%;
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: var(--radius);
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .primary-btn:hover {
            background: #3367d6;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(66, 133, 244, 0.3);
        }

        /* MODIFIED: Changed to 3-column grid for new button */
        .secondary-actions {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
        }

        .secondary-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 12px 16px;
            border: 2px solid var(--color-border);
            border-radius: var(--radius);
            background: var(--color-surface);
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            color: var(--color-text);
        }

        .secondary-btn:hover {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(66, 133, 244, 0.2);
        }

        .btn-icon {
            font-size: 16px;
        }

        /* Loading State */
        .loading-state {
            display: none;
            text-align: center;
            padding: 40px;
            color: var(--color-text-secondary);
        }

        .loading-state.show {
            display: block;
        }
        .spinner {
            width: 32px;
            height: 32px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .quick-action {
            background: var(--color-surface);
            border: 2px solid var(--color-border);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quick-action:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--color-primary);
        }

        .action-emoji {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .action-title {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .action-desc {
            font-size: 14px;
            color: var(--color-text-secondary);
        }

        .social-section {
            background: var(--color-surface);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--color-error);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .platform-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .platform-tab {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid var(--color-border);
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .platform-tab.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .platform-tab:hover:not(.active) {
            background: var(--color-bg);
        }

        .trending-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
        }

        .trending-card {
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius);
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .trending-card:hover {
            box-shadow: var(--shadow);
            transform: translateY(-2px);
        }

        .trending-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .trending-name {
            font-weight: 600;
            flex: 1;
        }

        .trending-price {
            color: var(--color-success);
            font-weight: 700;
            font-size: 14px;
        }

        .platform-badge {
            background: #e3f2fd;
            color: var(--color-primary);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-bottom: 8px;
            display: inline-block;
        }

        .trending-stats {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--color-text-secondary);
        }

        .trending-mentions {
            font-weight: 500;
        }

        .feature-screen {
            background: var(--color-surface);
            border-radius: var(--radius);
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
        }
        .feature-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .feature-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 12px;
        }
        .feature-subtitle {
            color: var(--color-text-secondary);
            font-size: 1.1rem;
        }

        .search-platforms {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .platform-search-card {
            background: var(--color-bg);
            border: 2px solid var(--color-border);
            border-radius: var(--radius);
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .platform-search-card:hover {
            border-color: var(--color-primary);
            transform: translateY(-2px);
        }

        .platform-search-card.active {
            border-color: var(--color-primary);
            background: var(--color-primary);
            color: white;
        }

        .platform-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        .platform-name {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .platform-desc {
            font-size: 14px;
            color: var(--color-text-secondary);
        }

        .platform-search-card.active .platform-desc {
            color: rgba(255,255,255,0.8);
        }

        .poll-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .poll-type-card {
            background: var(--color-bg);
            border: 2px solid var(--color-border);
            border-radius: var(--radius);
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .poll-type-card:hover {
            border-color: var(--color-primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .poll-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        .poll-title {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .poll-description {
            color: var(--color-text-secondary);
            font-size: 14px;
            line-height: 1.4;
        }

        .group-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .group-card {
            background: var(--color-bg);
            border: 2px solid var(--color-border);
            border-radius: var(--radius);
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .group-card:hover {
            box-shadow: var(--shadow);
            transform: translateY(-2px);
            border-color: var(--color-primary);
        }
        
        .group-card.joined {
            border-color: var(--color-success);
            background-color: #f0fff4;
        }
        
        .group-card.joined::after {
            content: '✓ Joined';
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--color-success);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .group-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .group-icon {
            font-size: 2.5rem;
        }

        .group-info h3 {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .group-members {
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        .group-description {
            color: var(--color-text-secondary);
            margin-bottom: 16px;
        }

        .group-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .group-tag {
            background: var(--color-primary);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--color-text-secondary);
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .status-message {
            position: fixed;
            top: 80px; /* MODIFIED: Pushed down to avoid nav overlap */
            right: 20px;
            padding: 12px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s ease;
            box-shadow: var(--shadow-lg);
            max-width: 90%;
            text-align: left;
        }
        
        .status-message.status-success { background: var(--color-success); }
        .status-message.status-error { background: var(--color-error); }
        .status-message.status-info { background: var(--color-primary); }
        .status-message b { display: block; margin-bottom: 4px; }

        @keyframes slideIn {
            from { transform: translateX(400px); }
            to { transform: translateX(0); }
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius);
            cursor: pointer;
            margin-bottom: 24px;
            transition: all 0.2s;
        }

        .back-btn:hover {
            background: var(--color-border);
        }

        /* FIXED: Enhanced Mobile-First Modal System */
.recruiter-modal {
    display: none !important;
    position: fixed !important;
    z-index: 999999 !important;
    left: 0 !important;
    top: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    height: 100dvh !important; /* Dynamic viewport height for mobile */
    background-color: rgba(0, 0, 0, 0.8) !important;
    animation: fadeIn 0.3s ease-in-out;
    -webkit-overflow-scrolling: touch !important; /* Smooth scrolling on iOS */
    overflow-y: auto !important;
}

.recruiter-modal.show {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    padding: 20px !important;
}

.modal-content {
    background-color: #ffffff !important;
    padding: 25px !important;
    border-radius: 16px !important;
    width: 95% !important;
    max-width: 450px !important;
    max-height: 85vh !important;
    max-height: 85dvh !important; /* Dynamic viewport height */
    overflow-y: auto !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3) !important;
    position: relative !important;
    margin: auto !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    z-index: 999999 !important;
    -webkit-overflow-scrolling: touch !important;
}


/* Mobile-specific adjustments */
@media (max-width: 768px) {
    .hero-title {
        font-size: 1.8rem !important;
        margin-bottom: 12px !important;
        line-height: 1.2 !important;
    }
    
    .hero-subtitle {
        font-size: 1rem !important;
        margin-bottom: 20px !important;
    }
    
    .search-box {
        flex-direction: column !important;
        gap: 12px !important;
    }
    
    .search-input {
        width: 100% !important;
        font-size: 16px !important; /* Prevent zoom on iOS */
    }
    
    .nav-actions {
        gap: 6px !important;
        flex-wrap: wrap !important;
    }
    
    .nav-btn {
        font-size: 11px !important;
        padding: 8px 12px !important;
        white-space: nowrap !important;
    }

    .results-header {
        flex-direction: column !important;
        align-items: stretch !important;
        gap: 12px !important;
    }

    .filters-grid {
        grid-template-columns: 1fr !important;
        gap: 16px !important;
    }
    
    .secondary-actions {
        grid-template-columns: 1fr !important;
        gap: 8px !important;
    }
    
    .product-card {
        margin-bottom: 16px !important;
    }
    
    .products-grid {
        grid-template-columns: 1fr !important;
        gap: 16px !important;
        padding: 16px !important;
    }
    
    .quick-actions {
        grid-template-columns: 1fr !important;
        gap: 12px !important;
    }
    
    .trending-grid {
        grid-template-columns: 1fr !important;
        gap: 12px !important;
    }
    
    .group-categories {
        grid-template-columns: 1fr !important;
        gap: 16px !important;
    }
    
    .poll-types {
        grid-template-columns: 1fr !important;
        gap: 16px !important;
    }
    
    .search-platforms {
        grid-template-columns: 1fr !important;
        gap: 16px !important;
    }
    
    /* Enhanced mobile container padding */
    .container {
        padding: 0 12px !important;
    }
    
    /* Better mobile typography */
    .feature-title {
        font-size: 1.5rem !important;
    }
    
    .feature-subtitle {
        font-size: 1rem !important;
    }
    
    /* Mobile modal improvements */
    .modal-content {
        width: 92% !important;
        padding: 20px !important;
        margin: 10px !important;
        border-radius: 12px !important;
    }
    
    .modal-title {
        font-size: 20px !important;
        margin-bottom: 16px !important;
    }
    
    .close-btn {
        font-size: 24px !important;
        right: 12px !important;
        top: 12px !important;
        padding: 8px !important;
    }
    
    /* FAB mobile optimization */
    #recruiterFab {
        bottom: 20px !important;
        right: 20px !important;
        padding: 14px 16px !important;
        font-size: 12px !important;
        border-radius: 25px !important;
        min-height: 44px !important; /* Apple's recommended minimum touch target */
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
    }
    
    /* Status message mobile positioning */
    .status-message {
        top: 70px !important;
        right: 12px !important;
        left: 12px !important;
        width: auto !important;
        max-width: none !important;
        font-size: 13px !important;
    }
}

/* Extra small screens */
@media (max-width: 480px) {
    .brand-title {
        font-size: 22px !important;
    }
    
    .nav-btn {
        font-size: 10px !important;
        padding: 6px 8px !important;
    }
    
    .hero-title {
        font-size: 1.5rem !important;
    }
    
    .filter-chip {
        font-size: 11px !important;
        padding: 6px 10px !important;
    }
    
    .product-name {
        font-size: 16px !important;
    }
    
    .product-price {
        font-size: 20px !important;
    }
}


/* FINAL WORKING FAB */
#recruiterFab {
    position: fixed;
    bottom: 25px;
    right: 25px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 25px;
    padding: 12px 20px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    font-weight: 600;
    font-size: 14px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    z-index: 999999;
    transition: all 0.3s ease;
    min-height: 44px;
    min-width: 140px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: simplePulse 2s ease-in-out infinite;
    overflow: hidden;               /* Required for shimmer */
}

#recruiterFab::before {
    content: "";
    position: absolute;
    top: 0; 
    left: -75%;
    width: 200%;
    height: 100%;
    background: linear-gradient(
      120deg, 
      rgba(255,255,255, 0) 30%, 
      rgba(255,255,255, 0.4) 50%, 
      rgba(255,255,255, 0) 70%
    );
    animation: shimmerMove 1.6s infinite linear;
    pointer-events: none;
}

#recruiterFab:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
}

@keyframes simplePulse {
    0%, 100% { 
        transform: scale(1);
        opacity: 0.9;
    }
    50% { 
        transform: scale(1.02);
        opacity: 1;
    }
}

@keyframes shimmerMove {
    0% { left: -75%; }
    100% { left: 100%; }
}

@media (max-width: 768px) {
    #recruiterFab {
        bottom: 20px;
        right: 20px;
        padding: 12px 16px;
        font-size: 12px;
        min-width: 120px;
    }
}

/*--- Compact Platform Tiles for Social Search (Mobile) ---*/
@media (max-width: 768px) {
    .search-platforms {
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
        margin-bottom: 20px !important;
    }
    .platform-search-card {
        padding: 12px 8px !important;
        text-align: center !important;
        min-height: 100px !important;
        border-radius: 10px !important;
    }
    .platform-icon {
        font-size: 1.8rem !important;
        margin-bottom: 6px !important;
    }
    .platform-name {
        font-size: 12px !important;
        font-weight: 600 !important;
        margin-bottom: 4px !important;
        line-height: 1.2 !important;
    }
    .platform-desc {
        font-size: 10px !important;
        line-height: 1.2 !important;
        color: var(--color-text-secondary) !important;
        display: -webkit-box !important;
        -webkit-line-clamp: 2 !important;
        -webkit-box-orient: vertical !important;
        overflow: hidden !important;
    }
}
@media (max-width: 480px) {
    .search-platforms {
        grid-template-columns: 1fr 1fr !important;
        gap: 6px !important;
    }
    .platform-search-card {
        padding: 10px 6px !important;
        min-height: 85px !important;
    }
    .platform-icon {
        font-size: 1.5rem !important;
        margin-bottom: 4px !important;
    }
    .platform-name {
        font-size: 11px !important;
        margin-bottom: 3px !important;
    }
    .platform-desc {
        font-size: 9px !important;
        -webkit-line-clamp: 1 !important;
    }
}
@media (max-width: 768px) {
  .platform-search-card.active .platform-desc {
    color: rgba(255,255,255,0.85) !important;
  }
}
@media (max-width: 480px) {
  .platform-search-card.active .platform-desc {
    color: rgba(255,255,255,0.9) !important;
  }
}


    </style>
</head>
<body>
    <div class="app">
        <!-- Enhanced Navigation -->
        <nav class="main-nav">
            <div class="nav-container">
               <h1 class="brand-title" id="brandTitle" style="cursor: pointer;">QwikPik</h1>
                <div class="nav-actions">
                    <button class="nav-btn active" id="homeBtn">
                        <span>🏠</span> Home
                    </button>
                    <button class="nav-btn" id="trendsBtn">
                        <span>📈</span> Trends
                    </button>
                    <button class="nav-btn" id="pollsBtn">
                        <span>📊</span> Polls
                    </button>
                    <button class="nav-btn" id="groupsBtn">
                        <span>👥</span> Groups
                    </button>
                </div>
            </div>
        </nav>

        <!-- Home Screen -->
        <div class="screen active" id="homeScreen">
            <!-- Hero Section -->
            <div class="hero-section">
                <div class="container">
                    <h1 class="hero-title">AI-Powered Social Shopping</h1>
                    <p class="hero-subtitle">Get recommendations • Ask community • Find trending products • Make confident decisions</p>
                    <div class="social-proof">
                        <span>✓ 50K+ active shoppers</span>
                        <span>✓ Real-time community insights</span>
                        <span>✓ AI-powered recommendations</span>
                    </div>
                </div>
            </div>

            <div class="container">
                <!-- Enhanced Search Section -->
                <div class="search-section">
                    <h3>What are you looking for today?</h3>
                    <div class="search-box">
                        <input type="text" class="search-input" id="mainSearchInput" 
                               placeholder="Search products... (e.g., facewash, headphones, moisturizer)">
                        <button class="voice-btn" id="mainVoiceBtn">🎤</button>
                        <button class="search-btn" onclick="performSmartSearch()">Search</button>
                    </div>
                    
                    <!-- Quick Suggestions -->
                    <div class="quick-suggestions">
                        <div class="suggestion-chip" onclick="quickSearch('facewash')">Facewash</div>
                        <div class="suggestion-chip" onclick="quickSearch('moisturizer')">Moisturizer</div>
                        <div class="suggestion-chip" onclick="quickSearch('headphones')">Headphones</div>
                        <div class="suggestion-chip" onclick="quickSearch('serum')">Serum</div>
                        <div class="suggestion-chip" onclick="quickSearch('books')">Books</div>
                        <div class="suggestion-chip" onclick="quickSearch('water bottle')">Water Bottle</div>
                    </div>
                </div>
                <!-- Loading State -->
                <div class="loading-state" id="loading">
                    <div class="spinner"></div>
                    <p>Searching products...</p>
                </div>
                
                <!-- Enhanced Search Results -->
                <div class="search-results-container" id="searchResults">
                    <div class="results-header">
                        <div>
                            <h2 class="results-title">Search Results</h2>
                            <p class="results-count" id="resultsCount">0 products found</p>
                        </div>
                        <div class="results-controls">
                            <select class="sort-dropdown" id="sortSelect">
                                <option value="relevance">Best Match</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                                <option value="rating">Highest Rated</option>
                                <option value="confidence">Confidence Score</option>
                            </select>
                        </div>
                    </div>

                    <!-- [ENHANCED] Prominent Filters Section -->
                    <div class="filters-section" id="filtersSection">
                        <div class="filters-header">
                            <span class="filters-title">Smart Filters</span>
                            <button class="clear-filters" onclick="clearAllFilters(event)">Clear All</button>
                        </div>
                        <div class="filters-content">
                            <div class="filters-grid">
                                <div class="filter-group">
                                    <div class="filter-group-title">💰 Price Range</div>
                                    <div class="filter-options">
                                        <div class="filter-chip" data-filter="price" data-value="0-500">Under ₹500</div>
                                        <div class="filter-chip" data-filter="price" data-value="500-1000">₹500-1000</div>
                                        <div class="filter-chip" data-filter="price" data-value="1000-2000">₹1000-2000</div>
                                        <div class="filter-chip" data-filter="price" data-value="2000+">Above ₹2000</div>
                                    </div>
                                </div>
                                <div class="filter-group">
                                    <div class="filter-group-title">📂 Category</div>
                                    <div class="filter-options">
                                        <div class="filter-chip" data-filter="category" data-value="beauty">Beauty</div>
                                        <div class="filter-chip" data-filter="category" data-value="electronics">Electronics</div>
                                        <div class="filter-chip" data-filter="category" data-value="home">Home</div>
                                        <div class="filter-chip" data-filter="category" data-value="books">Books</div>
                                    </div>
                                </div>
                                <div class="filter-group">
                                    <div class="filter-group-title">🎯 Scenario</div>
                                    <div class="filter-options">
                                        <div class="filter-chip" data-filter="scenario" data-value="college">College</div>
                                        <div class="filter-chip" data-filter="scenario" data-value="gym">Gym</div>
                                        <div class="filter-chip" data-filter="scenario" data-value="commute">Commute</div>
                                        <div class="filter-chip" data-filter="scenario" data-value="gift">Gift</div>
                                        <div class="filter-chip" data-filter="scenario" data-value="wfh">Work From Home</div>
                                    </div>
                                </div>
                                <div class="filter-group">
                                    <div class="filter-group-title">✨ Key Features</div>
                                    <div class="filter-options">
                                        <div class="filter-chip" data-filter="features" data-value="long_battery">Long Battery</div>
                                        <div class="filter-chip" data-filter="features" data-value="durable">Durable</div>
                                        <div class="filter-chip" data-filter="features" data-value="lightweight">Lightweight</div>
                                        <div class="filter-chip" data-filter="features" data-value="verified_reviews">Verified Reviews</div>
                                    </div>
                                </div>
                                <div class="filter-group">
                                    <div class="filter-group-title">🎯 Match Confidence</div>
                                    <div class="filter-options">
                                        <div class="filter-chip" data-filter="confidence" data-value="90+">90%+ Match</div>
                                        <div class="filter-chip" data-filter="confidence" data-value="80+">80%+ Match</div>
                                        <div class="filter-chip" data-filter="confidence" data-value="70+">70%+ Match</div>
                                    </div>
                                </div>
                                <div class="filter-group">
                                    <div class="filter-group-title">✨ Skin Type</div>
                                    <div class="filter-options">
                                        <div class="filter-chip" data-filter="skintype" data-value="oily">Oily Skin</div>
                                        <div class="filter-chip" data-filter="skintype" data-value="dry">Dry Skin</div>
                                        <div class="filter-chip" data-filter="skintype" data-value="sensitive">Sensitive Skin</div>
                                        <div class="filter-chip" data-filter="skintype" data-value="all">All Skin Types</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="productsGridWrapper">
                        <!-- Recommended Strip and Products Grid will populate here -->
                    </div>
                </div>
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <div class="quick-action" onclick="startSocialSearch()">
                        <div class="action-emoji">🔍</div>
                        <div class="action-title">Social Search</div>
                        <div class="action-desc">Find trending products across platforms</div>
                    </div>
                    
                    <div class="quick-action" onclick="createQuickPoll()">
                        <div class="action-emoji">📊</div>
                        <div class="action-title">Quick Poll</div>
                        <div class="action-desc">Ask community for opinions</div>
                    </div>
                    
                    <div class="quick-action" onclick="browseRecommendations()">
                        <div class="action-emoji">✨</div>
                        <div class="action-title">AI Recommendations</div>
                        <div class="action-desc">Personalized product suggestions</div>
                    </div>
                    
                    <div class="quick-action" onclick="joinGroups()">
                        <div class="action-emoji">👥</div>
                        <div class="action-title">Join Groups</div>
                        <div class="action-desc">Connect with like-minded shoppers</div>
                    </div>
                </div>

                <!-- Trending Products Section -->
                <div class="social-section">
                    <div class="section-header">
                        <h3 class="section-title">Trending Right Now</h3>
                        <div class="live-indicator">
                            <div class="live-dot"></div>
                            <span>Updated 2 min ago</span>
                        </div>
                    </div>
                    
                    <div class="platform-tabs">
                        <button class="platform-tab active" data-platform="all">All Platforms</button>
                        <button class="platform-tab" data-platform="instagram">📷 Instagram</button>
                        <button class="platform-tab" data-platform="youtube">📺 YouTube</button>
                        <button class="platform-tab" data-platform="twitter">🐦 X/Twitter</button>
                        <button class="platform-tab" data-platform="whatsapp">💬 WhatsApp</button>
                    </div>

                    <div class="trending-grid" id="trendingGrid">
                        <!-- Dynamic trending products -->
                    </div>
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">🛍️</div>
                    <h3>Discover Amazing Products!</h3>
                    <p>Use the search above or browse trending products to find what you need.</p>
                </div>
            </div>
        </div>

        <!-- Social Search Screen -->
        <div class="screen" id="socialSearchScreen">
            <div class="container">
                <button class="back-btn" onclick="showScreen('homeScreen')">
                    <span>←</span> Back to Home
                </button>

                <div class="feature-screen">
                    <div class="feature-header">
                        <h2 class="feature-title">🔍 Social Search</h2>
                        <p class="feature-subtitle">Discover trending products across all social platforms in real-time</p>
                    </div>

                    <div class="search-platforms">
                        <div class="platform-search-card" onclick="searchPlatform('instagram')">
                            <div class="platform-icon">📷</div>
                            <h3 class="platform-name">Instagram</h3>
                            <p class="platform-desc">Shoppable posts, Stories, and Reels from influencers</p>
                        </div>

                        <div class="platform-search-card" onclick="searchPlatform('tiktok')">
                            <div class="platform-icon">🎵</div>
                            <h3 class="platform-name">TikTok</h3>
                            <p class="platform-desc">Viral products from TikTok Shop and creators</p>
                        </div>

                        <div class="platform-search-card" onclick="searchPlatform('youtube')">
                            <div class="platform-icon">📺</div>
                            <h3 class="platform-name">YouTube</h3>
                            <p class="platform-desc">Product reviews, unboxings, and tutorials</p>
                        </div>

                        <div class="platform-search-card" onclick="searchPlatform('twitter')">
                            <div class="platform-icon">🐦</div>
                            <h3 class="platform-name">X/Twitter</h3>
                            <p class="platform-desc">Real-time product discussions and trends</p>
                        </div>
                    </div>

                    <div class="search-section">
                        <h3>Search Across All Platforms</h3>
                        <div class="search-box">
                            <input type="text" class="search-input" id="socialSearchInput" 
                                   placeholder="e.g., 'viral skincare', 'trending headphones', 'influencer favorites'">
                            <button class="search-btn" onclick="performSocialSearch()">Search All</button>
                        </div>
                    </div>
                    <div id="socialSearchResults" style="margin-top: 32px;">
                        <div class="empty-state">
                            <div class="empty-icon">🌐</div>
                            <h3>Ready to Explore?</h3>
                            <p>Search for products or select a platform to see what's trending across social media!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trends Screen -->
        <div class="screen" id="trendsScreen">
            <div class="container">
                <button class="back-btn" onclick="showScreen('homeScreen')">
                    <span>←</span> Back to Home
                </button>
                <div class="feature-screen">
                    <div class="feature-header">
                        <h2 class="feature-title">📈 Trending Now</h2>
                        <p class="feature-subtitle">Real-time trending products from social media platforms</p>
                    </div>

                    <div class="platform-tabs">
                        <button class="platform-tab active" data-trend-platform="all">🌐 All Platforms</button>
                        <button class="platform-tab" data-trend-platform="instagram">📷 Instagram</button>
                        <button class="platform-tab" data-trend-platform="tiktok">🎵 TikTok</button>
                        <button class="platform-tab" data-trend-platform="youtube">📺 YouTube</button>
                        <button class="platform-tab" data-trend-platform="twitter">🐦 X/Twitter</button>
                    </div>

                    <div class="trending-grid" id="trendsGridPage">
                        <!-- Trending content will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Polls Screen -->
        <div class="screen" id="pollsScreen">
            <div class="container">
                <button class="back-btn" onclick="showScreen('homeScreen')">
                    <span>←</span> Back to Home
                </button>

                <div class="feature-screen">
                    <div class="feature-header">
                        <h2 class="feature-title">📊 Community Polls</h2>
                        <p class="feature-subtitle">Get instant feedback from the community on your shopping decisions</p>
                    </div>

                    <div class="poll-types">
                        <div class="poll-type-card" onclick="createPoll('product-opinion')">
                            <div class="poll-icon">🤔</div>
                            <h3 class="poll-title">Should I Buy This?</h3>
                            <p class="poll-description">Get opinions on specific products you're considering</p>
                        </div>

                        <div class="poll-type-card" onclick="createPoll('vs-comparison')">
                            <div class="poll-icon">⚖️</div>
                            <h3 class="poll-title">This vs That</h3>
                            <p class="poll-description">Compare two products and let the community decide</p>
                        </div>

                        <div class="poll-type-card" onclick="createPoll('budget-advice')">
                            <div class="poll-icon">💰</div>
                            <h3 class="poll-title">Worth the Price?</h3>
                            <p class="poll-description">Ask if a product justifies its price point</p>
                        </div>

                        <div class="poll-type-card" onclick="createPoll('trending-vote')">
                            <div class="poll-icon">🔥</div>
                            <h3 class="poll-title">What's Trending?</h3>
                            <p class="poll-description">Vote on what products are worth buying now</p>
                        </div>

                        <div class="poll-type-card" onclick="createPoll('gift-ideas')">
                            <div class="poll-icon">🎁</div>
                            <h3 class="poll-title">Gift Recommendations</h3>
                            <p class="poll-description">Get suggestions for the perfect gift</p>
                        </div>

                        <div class="poll-type-card" onclick="createPoll('seasonal-picks')">
                            <div class="poll-icon">🌟</div>
                            <h3 class="poll-title">Seasonal Must-Haves</h3>
                            <p class="poll-description">What products are essential this season?</p>
                        </div>
                    </div>
                    <div class="social-section" id="activePollsSection">
                        <h3>Recent Community Polls</h3>
                        <div id="recentPollsList">
                            <!-- Recent polls will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Groups Screen -->
        <div class="screen" id="groupsScreen">
            <div class="container">
                <button class="back-btn" onclick="showScreen('homeScreen')">
                    <span>←</span> Back to Home
                </button>

                <div class="feature-screen">
                    <div class="feature-header">
                        <h2 class="feature-title">👥 Shopping Groups</h2>
                        <p class="feature-subtitle">Join communities of like-minded shoppers and discover products together</p>
                    </div>

                    <div class="group-categories">
                        <div class="group-card" data-group-id="beauty-enthusiasts" onclick="joinGroup('beauty-enthusiasts', event)">
                            <div class="group-header">
                                <div class="group-icon">💄</div>
                                <div class="group-info">
                                    <h3>Beauty Enthusiasts</h3>
                                    <p class="group-members">12.5K members</p>
                                </div>
                            </div>
                            <p class="group-description">Discover the latest skincare, makeup, and beauty trends. Share reviews and get personalized recommendations.</p>
                            <div class="group-tags">
                                <span class="group-tag">Skincare</span>
                                <span class="group-tag">Makeup</span>
                                <span class="group-tag">Reviews</span>
                            </div>
                        </div>
                        <div class="group-card" data-group-id="tech-deals" onclick="joinGroup('tech-deals', event)">
                            <div class="group-header">
                                <div class="group-icon">📱</div>
                                <div class="group-info">
                                    <h3>Tech Deals &amp; Reviews</h3>
                                    <p class="group-members">8.7K members</p>
                                </div>
                            </div>
                            <p class="group-description">Find the best deals on gadgets, get honest reviews, and stay updated on the latest tech releases.</p>
                            <div class="group-tags">
                                <span class="group-tag">Electronics</span>
                                <span class="group-tag">Deals</span>
                                <span class="group-tag">Reviews</span>
                            </div>
                        </div>

                        <div class="group-card" data-group-id="home-decor" onclick="joinGroup('home-decor', event)">
                            <div class="group-header">
                                <div class="group-icon">🏠</div>
                                <div class="group-info">
                                    <h3>Home &amp; Decor Lovers</h3>
                                    <p class="group-members">6.3K members</p>
                                </div>
                            </div>
                            <p class="group-description">Transform your space with budget-friendly finds, DIY projects, and interior design inspiration.</p>
                            <div class="group-tags">
                                <span class="group-tag">Home Decor</span>
                                <span class="group-tag">DIY</span>
                                <span class="group-tag">Budget</span>
                            </div>
                        </div>

                        <div class="group-card" data-group-id="fashion-finds" onclick="joinGroup('fashion-finds', event)">
                            <div class="group-header">
                                <div class="group-icon">👗</div>
                                <div class="group-info">
                                    <h3>Fashion Finds Under ₹2000</h3>
                                    <p class="group-members">15.2K members</p>
                                </div>
                            </div>
                            <p class="group-description">Affordable fashion discoveries, styling tips, and outfit inspiration within budget.</p>
                            <div class="group-tags">
                                <span class="group-tag">Fashion</span>
                                <span class="group-tag">Budget</span>
                                <span class="group-tag">Style</span>
                            </div>
                        </div>

                        <div class="group-card" data-group-id="fitness-gear" onclick="joinGroup('fitness-gear', event)">
                            <div class="group-header">
                                <div class="group-icon">🏃‍♀️</div>
                                <div class="group-info">
                                    <h3>Fitness &amp; Wellness</h3>
                                    <p class="group-members">9.8K members</p>
                                </div>
                            </div>
                            <p class="group-description">Best fitness equipment, supplements, and wellness products recommended by active community members.</p>
                            <div class="group-tags">
                                <span class="group-tag">Fitness</span>
                                <span class="group-tag">Wellness</span>
                                <span class="group-tag">Gear</span>
                            </div>
                        </div>
                        <div class="group-card" data-group-id="book-lovers" onclick="joinGroup('book-lovers', event)">
                            <div class="group-header">
                                <div class="group-icon">📚</div>
                                <div class="group-info">
                                    <h3>Book Lovers &amp; Learners</h3>
                                    <p class="group-members">4.1K members</p>
                                </div>
                            </div>
                            <p class="group-description">Book recommendations, course suggestions, and educational resources for continuous learning.</p>
                            <div class="group-tags">
                                <span class="group-tag">Books</span>
                                <span class="group-tag">Learning</span>
                                <span class="group-tag">Education</span>
                            </div>
                        </div>
                    </div>
                    <div class="social-section">
                        <h3>Group Shopping Features</h3>
                        <div class="quick-actions" style="margin-top: 20px;">
                            <div class="quick-action" onclick="createShoppingGroup()">
                                <div class="action-emoji">➕</div>
                                <div class="action-title">Create Group</div>
                                <div class="action-desc">Start your own shopping community</div>
                            </div>
                            
                            <div class="quick-action" onclick="groupDeals()">
                                <div class="action-emoji">💎</div>
                                <div class="action-title">Group Deals</div>
                                <div class="action-desc">Exclusive discounts for group members</div>
                            </div>
                            
                            <div class="quick-action" onclick="sharedWishlists()">
                                <div class="action-emoji">📝</div>
                                <div class="action-title">Shared Lists</div>
                                <div class="action-desc">Collaborative shopping lists</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // MODIFIED: Enriched database with popularity and trust signals
        const ENHANCED_PRODUCT_DATABASE = [
            { id: 1, name: "CeraVe Hydrating Cleanser for Dry Skin", brand: "CeraVe", category: "beauty", price: 1299, originalPrice: 1699, confidence: 94, keywords: ["facewash", "face wash", "cleanser", "dry skin", "hydrating", "cerave"], skinType: "dry", vibe: "Dermat Recommended", description: "Gentle, non-foaming cleanser with ceramides and hyaluronic acid for dry to very dry skin", image: '🧴', features: ['verified_reviews'], scenarios: ['college', 'gift'], popularity: 95, trust: { marketplace: 92, video: 88, community: 85, recency: 10 } },
            { id: 2, name: "Neutrogena Oil-Free Face Wash for Oily Skin", brand: "Neutrogena", category: "beauty", price: 699, originalPrice: 999, confidence: 91, keywords: ["facewash", "face wash", "oil-free", "oily skin", "neutrogena", "cleanser"], skinType: "oily", vibe: "Oil Control", description: "Deep-cleaning face wash that removes excess oil without over-drying", image: '🧴', features: [], scenarios: ['college'], popularity: 88, trust: { marketplace: 85, video: 78, community: 72, recency: 25 } },
            { id: 3, name: "Himalaya Purifying Neem Face Wash", brand: "Himalaya", category: "beauty", price: 195, originalPrice: 250, confidence: 88, keywords: ["facewash", "face wash", "neem", "natural", "acne", "himalaya", "purifying"], skinType: "oily", vibe: "Natural", description: "Herbal face wash with neem and turmeric for acne-prone skin", image: '🌿', features: [], scenarios: [], popularity: 92, trust: { marketplace: 89, video: 75, community: 80, recency: 5 } },
            { id: 4, name: "Plum Green Tea Pore Cleansing Face Wash", brand: "Plum", category: "beauty", price: 349, originalPrice: 450, confidence: 89, keywords: ["facewash", "face wash", "green tea", "pore cleansing", "plum"], skinType: "oily", vibe: "Pore Cleansing", description: "Gentle gel cleanser with green tea extract for deep pore cleansing", image: '🌿', features: [], scenarios: ['college'], popularity: 85, trust: { marketplace: 82, video: 80, community: 77, recency: 40 } },
            { id: 5, name: "Mamaearth Tea Tree Face Wash", brand: "Mamaearth", category: "beauty", price: 249, originalPrice: 399, confidence: 87, keywords: ["facewash", "face wash", "tea tree", "acne", "natural", "mamaearth"], skinType: "oily", vibe: "Acne Care", description: "Natural face wash with tea tree oil for acne-prone and oily skin", image: '🌿', features: [], scenarios: [], popularity: 82, trust: { marketplace: 80, video: 72, community: 75, recency: 60 } },
            { id: 6, name: "Olay Regenerist Micro-Sculpting Cream", brand: "Olay", category: "beauty", price: 2999, originalPrice: 3999, confidence: 93, keywords: ["moisturizer", "moisturiser", "anti-aging", "olay", "cream"], skinType: "all", vibe: "Anti-Aging", description: "Advanced anti-aging moisturizer with amino-peptides and niacinamide", image: '🧴', features: [], scenarios: ['gift'], popularity: 80, trust: { marketplace: 90, video: 85, community: 82, recency: 15 } },
            { id: 7, name: "Neutrogena Hydra Boost Water Gel", brand: "Neutrogena", category: "beauty", price: 1299, originalPrice: 1699, confidence: 90, keywords: ["moisturizer", "moisturiser", "gel", "hydrating", "neutrogena", "water gel"], skinType: "oily", vibe: "Lightweight", description: "Oil-free gel moisturizer with hyaluronic acid for oily skin", image: '💧', features: ['lightweight', 'verified_reviews'], scenarios: ['college', 'gift'], popularity: 91, trust: { marketplace: 88, video: 84, community: 80, recency: 8 } },
            { id: 8, name: "The Ordinary Niacinamide 10% + Zinc 1%", brand: "The Ordinary", category: "beauty", price: 899, originalPrice: 1299, confidence: 96, keywords: ["serum", "niacinamide", "ordinary", "acne", "oily skin"], skinType: "oily", vibe: "Blemish Control", description: "High-strength niacinamide serum to reduce appearance of blemishes", image: '💧', features: [], scenarios: [], popularity: 98, trust: { marketplace: 95, video: 92, community: 90, recency: 12 } },
            { id: 9, name: "Minimalist Vitamin C 10% Face Serum", brand: "Minimalist", category: "beauty", price: 599, originalPrice: 999, confidence: 92, keywords: ["serum", "vitamin c", "minimalist", "brightening", "antioxidant"], skinType: "all", vibe: "Brightening", description: "Stable vitamin C serum for brightening and protecting skin", image: '✨', features: [], scenarios: [], popularity: 89, trust: { marketplace: 87, video: 83, community: 81, recency: 20 } },
            { id: 10, name: "boAt Rockerz 450 Bluetooth Headphones", brand: "boAt", category: "electronics", price: 1299, originalPrice: 2990, confidence: 95, keywords: ["headphones", "bluetooth", "wireless", "music", "bass", "boat"], vibe: "Bass Heavy", description: "Wireless Bluetooth headphones with Extra Bass and 15-hour playback", image: '🎧', features: ['long_battery', 'durable'], scenarios: ['college', 'gym', 'commute'], popularity: 97, trust: { marketplace: 94, video: 90, community: 88, recency: 5 } },
            { id: 11, name: "Sony WH-CH720N Noise Canceling Headphones", brand: "Sony", category: "electronics", price: 8999, originalPrice: 12999, confidence: 92, keywords: ["headphones", "noise cancelling", "sony", "wireless", "bluetooth"], vibe: "Premium", description: "Over-ear headphones with active noise canceling and 35-hour battery", image: '🎧', features: ['long_battery'], scenarios: ['commute', 'wfh'], popularity: 85, trust: { marketplace: 91, video: 87, community: 84, recency: 35 } },
            { id: 12, name: "JBL Tune 770NC Wireless Headphones", brand: "JBL", category: "electronics", price: 7999, originalPrice: 9999, confidence: 89, keywords: ["headphones", "jbl", "wireless", "noise cancelling"], vibe: "Balanced", description: "Wireless over-ear headphones with adaptive noise cancelling", image: '🎧', features: ['long_battery'], scenarios: ['commute', 'wfh'], popularity: 83, trust: { marketplace: 86, video: 82, community: 80, recency: 45 } },
            { id: 13, name: "Milton Thermosteel Water Bottle 1000ml", brand: "Milton", category: "home", price: 899, originalPrice: 1299, confidence: 91, keywords: ["water bottle", "milton", "steel", "insulated", "thermos"], vibe: "Durable", description: "Vacuum insulated stainless steel water bottle keeps drinks hot/cold for 24 hours", image: '💧', features: ['durable'], scenarios: ['commute', 'gym'], popularity: 94, trust: { marketplace: 90, video: 85, community: 88, recency: 18 } },
            { id: 14, name: "Prestige Svachh Mini Pressure Cooker 2L", brand: "Prestige", category: "home", price: 1299, originalPrice: 1899, confidence: 88, keywords: ["pressure cooker", "prestige", "kitchen", "cooking", "mini"], vibe: "Essential", description: "Compact pressure cooker perfect for small families with safety features", image: '🍳', features: [], scenarios: [], popularity: 80, trust: { marketplace: 85, video: 75, community: 78, recency: 70 } },
            { id: 15, name: "Atomic Habits by James Clear", brand: "Random House", category: "books", price: 399, originalPrice: 699, confidence: 98, keywords: ["book", "habits", "self-help", "productivity", "james clear", "atomic habits"], vibe: "Life Changing", description: "The life-changing million-copy bestseller on building good habits", image: '📚', features: [], scenarios: ['college', 'wfh', 'gift'], popularity: 99, trust: { marketplace: 96, video: 94, community: 95, recency: 3 } },
            { id: 16, name: "Think and Grow Rich by Napoleon Hill", brand: "General Press", category: "books", price: 149, originalPrice: 250, confidence: 94, keywords: ["book", "success", "wealth", "napoleon hill", "think and grow rich"], vibe: "Classic", description: "Timeless success principles that have helped millions achieve their goals", image: '📚', features: [], scenarios: ['wfh', 'gift'], popularity: 87, trust: { marketplace: 90, video: 85, community: 88, recency: 100 } }
        ];
        
        // Trending Products Data  
        const trendingProducts = [
            { id: 't1', name: "iPhone 15 Pro Max", platform: "Instagram", mentions: 234500, trend: "#iPhone15", price: "₹1,29,900", category: "electronics" },
            { id: 't2', name: "Rare Beauty Blush", platform: "YouTube", mentions: 156700, trend: "#rarebeauty", price: "₹2,200", category: "beauty" },
            { id: 't3', name: "Stanley Tumbler", platform: "Twitter", mentions: 89200, trend: "#StanleyTumbler", price: "₹3,500", category: "home" },
            { id: 't4', name: "AirPods Pro 2", platform: "Instagram", mentions: 198300, trend: "#AirPodsProMax", price: "₹24,900", category: "electronics" },
            { id: 't5', name: "Nykaa Face Wash", platform: "WhatsApp", mentions: 67400, trend: "#SkincareRoutine", price: "₹299", category: "beauty" },
            { id: 't6', name: "Kindle Paperwhite", platform: "Twitter", mentions: 43200, trend: "#KindleReads", price: "₹13,999", category: "books" }
        ];

        // Sample Polls Data
        const samplePolls = [
            { id: 'poll1', question: 'Should I buy CeraVe face wash for ₹1299?', votes: { yes: 145, no: 23, maybe: 67 }, platform: 'WhatsApp Groups' },
            { id: 'poll2', question: 'boAt headphones vs Sony - which is better for students?', votes: { boat: 234, sony: 156 }, platform: 'Instagram Stories' },
            { id: 'poll3', question: 'Is Minimalist Vitamin C serum worth ₹599?', votes: { worth: 189, overpriced: 45, alternatives: 78 }, platform: 'Reddit r/IndianSkincareAddicts' }
        ];

        // Application State
        let currentResults = [];
        let currentFilters = {
            price: null,
            category: null,
            confidence: null,
            skintype: null,
            scenario: null,
            features: []
        };
        let isVoiceActive = false;

        // Enhanced Search Function with Better Matching
        function performSmartSearch() {
            const query = document.getElementById('mainSearchInput').value.trim();
            
            if (!query) {
                showToast('Please enter a search term', 'error');
                return;
            }

            showLoading(true);
            
            setTimeout(() => {
                const results = searchProducts(query);
                displaySearchResults(results, query);
                showLoading(false);
                
                if (results.length > 0) {
                    showToast(`Found ${results.length} products`, 'success');
                    document.getElementById('searchResults').scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    showToast('No products found. Try different keywords.', 'error');
                }
            }, 800);
        }

        function searchProducts(query) {
            const searchTerm = query.toLowerCase().trim();
            console.log(`Searching for: "${searchTerm}"`);
            
            const results = ENHANCED_PRODUCT_DATABASE.filter(product => {
                const keywordMatch = product.keywords.some(keyword => keyword.toLowerCase().includes(searchTerm) || searchTerm.includes(keyword.toLowerCase()));
                const nameMatch = product.name.toLowerCase().includes(searchTerm);
                const brandMatch = product.brand.toLowerCase().includes(searchTerm);
                const categoryMatch = product.category.toLowerCase().includes(searchTerm);
                const descriptionMatch = product.description.toLowerCase().includes(searchTerm);
                return keywordMatch || nameMatch || brandMatch || categoryMatch || descriptionMatch;
            });

            results.sort((a, b) => calculateRelevanceScore(b, searchTerm) - calculateRelevanceScore(a, searchTerm));
            return results;
        }

        // MODIFIED: Enhanced relevance scoring with trust, popularity, and context
        function calculateRelevanceScore(product, searchTerm) {
            let score = 0;
            if (product.name.toLowerCase().includes(searchTerm)) score += 20;
            product.keywords.forEach(keyword => {
                if (keyword.toLowerCase() === searchTerm) score += 15;
                else if (keyword.toLowerCase().includes(searchTerm)) score += 10;
                else if (searchTerm.includes(keyword.toLowerCase())) score += 8;
            });
            if (product.brand.toLowerCase().includes(searchTerm)) score += 12;
            if (product.category.toLowerCase().includes(searchTerm)) score += 8;
            
            if (currentFilters.scenario && product.scenarios?.includes(currentFilters.scenario)) {
                score += 12;
            }
            if (currentFilters.features.length > 0 && product.features) {
                const featureMatches = product.features.filter(f => currentFilters.features.includes(f));
                score += featureMatches.length * 6;
            }

            if (product.popularity) {
                score += product.popularity * 0.1;
            }

            let trustValue = product.confidence;
            if (product.trust) {
                let comp = (0.4 * product.trust.marketplace) + (0.3 * product.trust.video) + (0.3 * product.trust.community);
                if (product.trust.recency <= 14) comp += 5;
                else if (product.trust.recency <= 30) comp += 3;
                trustValue = Math.min(100, comp);
            }
            score += trustValue * 0.12;

            return score;
        }

        function displaySearchResults(results, query) {
            const searchResultsContainer = document.getElementById('searchResults');
            const productsGridWrapper = document.getElementById('productsGridWrapper');
            const resultsCount = document.getElementById('resultsCount');
            
            currentResults = results;
            resultsCount.textContent = `${results.length} products found for "${query}"`;
            
            if (results.length === 0) {
                productsGridWrapper.innerHTML = `<div class="products-grid"><div class="empty-state"><div class="empty-icon">🤔</div><h3>No products found</h3><p>Try different keywords or create a poll to ask the community!</p><button class="primary-btn" onclick="createQuickPoll()" style="margin-top: 16px; width: auto; padding: 12px 24px;">📊 Ask Community</button></div></div>`;
            } else {
                displayFilteredResults(results);
            }
            
            searchResultsContainer.classList.add('show');
            document.getElementById('filtersSection').classList.add('expanded');
        }

        function quickSearch(term) {
            document.getElementById('mainSearchInput').value = term;
            performSmartSearch();
        }

        function setupFilters() {
            document.querySelector('.filters-header').addEventListener('click', function() {
                this.parentElement.classList.toggle('expanded');
            });

            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.addEventListener('click', function() {
                    const filterType = this.dataset.filter;
                    const filterValue = this.dataset.value;
                    
                    if (filterType === 'features') {
                        this.classList.toggle('active');
                        if (currentFilters.features.includes(filterValue)) {
                            currentFilters.features = currentFilters.features.filter(f => f !== filterValue);
                        } else {
                            currentFilters.features.push(filterValue);
                        }
                    } else {
                        if (this.classList.contains('active')) {
                            this.classList.remove('active');
                            currentFilters[filterType] = null;
                        } else {
                            document.querySelectorAll(`[data-filter="${filterType}"]`).forEach(f => f.classList.remove('active'));
                            this.classList.add('active');
                            currentFilters[filterType] = filterValue;
                        }
                    }
                    applyFilters();
                });
            });

            document.getElementById('sortSelect').addEventListener('change', function() {
                sortResults(this.value);
            });
        }
        
        function applyFilters() {
            let filtered = [...currentResults];
            
            if (currentFilters.price) {
                filtered = filtered.filter(product => {
                    if (currentFilters.price === '0-500') return product.price <= 500;
                    if (currentFilters.price === '500-1000') return product.price > 500 && product.price <= 1000;
                    if (currentFilters.price === '1000-2000') return product.price > 1000 && product.price <= 2000;
                    if (currentFilters.price === '2000+') return product.price > 2000;
                    return true;
                });
            }
            if (currentFilters.category) {
                filtered = filtered.filter(product => product.category === currentFilters.category);
            }
            if (currentFilters.confidence) {
                const minConfidence = parseInt(currentFilters.confidence.replace('+', ''));
                filtered = filtered.filter(product => product.confidence >= minConfidence);
            }
            if (currentFilters.skintype && currentFilters.skintype !== 'all') {
                filtered = filtered.filter(product => product.skinType === currentFilters.skintype || !product.skinType);
            }
            if (currentFilters.scenario) {
                filtered = filtered.filter(product => product.scenarios?.includes(currentFilters.scenario));
            }
            if (currentFilters.features.length > 0) {
                filtered = filtered.filter(product => {
                    return product.features && currentFilters.features.every(feature => product.features.includes(feature));
                });
            }
            
            displayFilteredResults(filtered);
        }

        // ADDED: Helper to render a single product card
        function renderProductCard(product) {
            let trustValue = product.confidence;
            if (product.trust) {
                let comp = (0.4 * product.trust.marketplace) + (0.3 * product.trust.video) + (0.3 * product.trust.community);
                if (product.trust.recency <= 14) comp += 5;
                else if (product.trust.recency <= 30) comp += 3;
                trustValue = Math.min(100, Math.round(comp));
            }

            return `
                <div class="product-card" onclick="viewProduct(${product.id})">
                    <div class="product-image-placeholder">
                        ${product.image || '🛍️'}
                        <div class="confidence-badge">${trustValue}% Trust</div>
                    </div>
                    <div class="product-content">
                        <div class="product-header">
                            <span class="product-brand">${product.brand}</span>
                        </div>
                        
                        <h3 class="product-name">${product.name}</h3>
                        
                        <div class="trust-breakdown">
                            <span title="Marketplace Trust">📦 ${product.trust?.marketplace || '-'}%</span>
                            <span title="Video Trust">📺 ${product.trust?.video || '-'}%</span>
                            <span title="Community Trust">💬 ${product.trust?.community || '-'}%</span>
                        </div>

                        <div class="vibe-tags">
                            <span class="vibe-tag highlight">${product.vibe}</span>
                            ${product.skinType ? `<span class="vibe-tag">For ${product.skinType} skin</span>` : ''}
                            <span class="vibe-tag">${product.confidence}% Match</span>
                        </div>

                        <div class="product-price">
                            ₹${product.price.toLocaleString()}
                            ${product.originalPrice ? `<span class="original-price">₹${product.originalPrice.toLocaleString()}</span>` : ''}
                            ${product.originalPrice ? `<span class="discount-badge">${Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)}% off</span>` : ''}
                        </div>
                        
                        <div class="product-actions">
                            <div class="primary-action">
                                <button class="primary-btn" onclick="quickBuy(${product.id}); event.stopPropagation();">
                                    <span class="btn-icon">🛒</span> Quick Buy
                                </button>
                            </div>
                            <div class="secondary-actions">
                                <button class="secondary-btn" onclick="askCommunity('${product.name}', ${product.price}); event.stopPropagation();">
                                    <span class="btn-icon">💬</span> Ask
                                </button>
                                <button class="secondary-btn" onclick="shareProduct(${product.id}); event.stopPropagation();">
                                    <span class="btn-icon">📤</span> Share
                                </button>
                                <button class="secondary-btn" onclick="showWhyThis(${product.id}); event.stopPropagation();">
                                    <span class="btn-icon">❓</span> Why This?
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // MODIFIED: Display logic with recommended strip
        function displayFilteredResults(results) {
            const productsGridWrapper = document.getElementById('productsGridWrapper');
            document.getElementById('resultsCount').textContent = `${results.length} products found`;
            
            if (results.length === 0) {
                productsGridWrapper.innerHTML = `<div class="products-grid"><div class="empty-state">...</div></div>`;
                return;
            }
            
            let recommendedHTML = '';
            if (results.length > 3 && !currentFilters.price && !currentFilters.confidence && !currentFilters.skintype) {
                const top3 = [...results].slice(0, 3);
                recommendedHTML = `
                    <div class="recommended-strip">
                        <h3>✨ Recommended for You</h3>
                        <div class="products-grid">${top3.map(renderProductCard).join('')}</div>
                    </div>`;
            }

            const mainGridHTML = `<div class="products-grid">${results.map(renderProductCard).join('')}</div>`;
            productsGridWrapper.innerHTML = recommendedHTML + mainGridHTML;
        }

        function sortResults(sortBy) {
            let sorted = [...currentResults];
            
            switch(sortBy) {
                case 'price-low': sorted.sort((a, b) => a.price - b.price); break;
                case 'price-high': sorted.sort((a, b) => b.price - a.price); break;
                case 'rating': sorted.sort((a, b) => b.confidence - a.confidence); break;
                case 'confidence': sorted.sort((a, b) => b.confidence - a.confidence); break;
                default: 
                    const query = document.getElementById('mainSearchInput').value.trim();
                    sorted.sort((a, b) => calculateRelevanceScore(b, query) - calculateRelevanceScore(a, query));
                    break;
            }
            
            currentResults = sorted; // Update currentResults with the sorted list
            applyFilters();
        }

        function clearAllFilters(event) {
            if (event) event.stopPropagation();
            currentFilters = { price: null, category: null, confidence: null, skintype: null, scenario: null, features: [] };
            document.querySelectorAll('.filter-chip').forEach(chip => chip.classList.remove('active'));
            // After clearing, re-run the search to get the original ranked list
            performSmartSearch();
        }
        
        // ADDED: "Why this choice?" transparency function
        function showWhyThis(productId) {
            const p = ENHANCED_PRODUCT_DATABASE.find(x => x.id === productId);
            if (!p) return;

            const breakdown = `
                <b>Why we recommended ${p.name}:</b>
                Trust Score: ${p.trust?.marketplace || '-'}% (Marketplace), ${p.trust?.video || '-'}% (Video), ${p.trust?.community || '-'}% (Community)<br>
                Recency: ${p.trust?.recency || '-'} days ago<br>
                Popularity Score: ${p.popularity || '-'}/100<br>
                Matched Features: ${(p.features || []).join(', ') || 'None'}<br>
                Matched Scenario: ${currentFilters.scenario || 'General'}
            `;
            showToast(breakdown, 'info');
        }

        // Voice Search Implementation
        function setupVoiceSearch() {
            const voiceBtn = document.getElementById('mainVoiceBtn');
            if ('webkitSpeechRecognition' in window) {
                const recognition = new webkitSpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-IN';

                voiceBtn.addEventListener('click', function() {
                    if (isVoiceActive) {
                        recognition.stop();
                        return;
                    }
                    isVoiceActive = true;
                    this.classList.add('listening');
                    recognition.start();
                    showToast('🎤 Listening... speak now!', 'info');
                });

                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('mainSearchInput').value = transcript;
                    showToast(`Voice input: "${transcript}"`, 'info');
                    performSmartSearch();
                };

                recognition.onend = function() {
                    isVoiceActive = false;
                    voiceBtn.classList.remove('listening');
                };

                recognition.onerror = function() {
                    isVoiceActive = false;
                    voiceBtn.classList.remove('listening');
                    showToast('Voice search error. Please try again.', 'error');
                };
            } else {
                voiceBtn.style.display = 'none';
            }
        }

        // Social Search Feature
        function startSocialSearch() {
            showToast('🔍 Opening Social Search...', 'info');
            showScreen('socialSearchScreen');
        }
	
function performSocialSearch() {
    const query = document.getElementById('socialSearchInput').value.trim();
    if (!query) {
        showToast('Please enter a search term for social search', 'error');
        return;
    }
    showToast(`🔍 Searching "${query}" across all social platforms...`, 'info');
    setTimeout(() => {
        const resultsContainer = document.getElementById('socialSearchResults');
        const socialPlatforms = [
            { name: 'Instagram', icon: '📷', mentions: Math.floor(Math.random() * 500 + 100) + 'K' },
            { name: 'TikTok', icon: '🎵', mentions: Math.floor(Math.random() * 300 + 50) + 'K' },
            { name: 'YouTube', icon: '📺', mentions: Math.floor(Math.random() * 200 + 30) + 'K' },
            { name: 'Twitter', icon: '🐦', mentions: Math.floor(Math.random() * 150 + 20) + 'K' }
        ];
        resultsContainer.innerHTML = `
            <div class="feature-screen">
                <h3>🌐 Search Results for "${query}"</h3>
                <div class="trending-grid">
                    ${socialPlatforms.map(platform => `
                        <div class="trending-card">
                            <div class="trending-name">${query} on ${platform.name}</div>
                            <div class="platform-badge">${platform.icon} ${platform.name}</div>
                            <div class="trending-stats">
                                <span class="trending-mentions">${platform.mentions} mentions</span>
                                <span style="color: var(--color-primary);">#trending</span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>`;
        setTimeout(() => {
            resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
        showToast(`✅ Found trending content for "${query}" across all platforms!`, 'success');
    }, 1000);
}

      function searchPlatform(platform) {
    document.querySelectorAll('.platform-search-card').forEach(card => card.classList.remove('active'));
    event.target.closest('.platform-search-card').classList.add('active');
    
    const platformData = {
        'instagram': { name: 'Instagram', icon: '📷', results: ['Viral skincare hauls', 'Influencer fashion finds', 'Beauty product reviews'] },
        'tiktok': { name: 'TikTok', icon: '🎵', results: ['Trending tech gadgets', 'Viral home hacks', 'Budget beauty finds'] },
        'youtube': { name: 'YouTube', icon: '📺', results: ['Product unboxing videos', 'Detailed reviews', 'Tutorial recommendations'] },
        'twitter': { name: 'X/Twitter', icon: '🐦', results: ['Real-time product buzz', 'Deal alerts', 'Community discussions'] }
    };
    const data = platformData[platform];
    showToast(`🔍 Searching ${data.name} for trending products...`, 'info');
    
    setTimeout(() => {
        const resultsContainer = document.getElementById('socialSearchResults');
        resultsContainer.innerHTML = `<div class="feature-screen"><h3>${data.icon} ${data.name} Search Results</h3><div class="trending-grid">${data.results.map(result => `<div class="trending-card"><div class="trending-name">${result}</div><div class="platform-badge">${data.icon} ${data.name}</div><div class="trending-stats"><span class="trending-mentions">${Math.floor(Math.random() * 50 + 10)}K mentions</span><span style="color: var(--color-primary);">#trending</span></div></div>`).join('')}</div></div>`;
        
        // ADDED: Auto-scroll to results on mobile
        setTimeout(() => {
            resultsContainer.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }, 100);
        
        showToast(`Found trending content on ${data.name}!`, 'success');
    }, 1000);
}


        // Polls Feature
        function createQuickPoll() {
            showToast('📊 Opening Community Polls...', 'info');
            showScreen('pollsScreen');
        }

        function createPoll(type) {
            let pollQuestion = '';
            
            switch(type) {
                case 'product-opinion':
                    const product = prompt("What product are you considering buying?");
                    if (product) pollQuestion = `Should I buy ${product}?`;
                    break;
                case 'vs-comparison':
                    const item1 = prompt("Enter the first product to compare:");
                    if (!item1) return;
                    const item2 = prompt("Enter the second product to compare:");
                    if (item2) pollQuestion = `Which is better: ${item1} or ${item2}?`;
                    break;
                case 'budget-advice':
                    const budgetProduct = prompt("What product are you asking about?");
                    if (!budgetProduct) return;
                    const price = prompt(`What is the price of ${budgetProduct}?`);
                    if (price) pollQuestion = `Is ${budgetProduct} worth ₹${price}?`;
                    break;
                default:
                    pollQuestion = "A new poll was created!";
                    break;
            }

            if (pollQuestion) {
                 showToast(`📊 Creating poll: "${pollQuestion}"...`, 'info');
                setTimeout(() => {
                    showToast(`✅ Poll created! Sharing across social platforms...`, 'success');
                    setTimeout(() => {
                        showToast(`🎉 Your poll is now live!`, 'success');
                        loadRecentPolls();
                    }, 1000);
                }, 800);
            }
        }

        function loadRecentPolls() {
            const recentPollsList = document.getElementById('recentPollsList');
            recentPollsList.innerHTML = samplePolls.map(poll => `
                <div class="trending-card" style="margin-bottom: 16px;">
                    <div class="trending-header"><div class="trending-name" style="font-size: 14px;">${poll.question}</div></div>
                    <div class="platform-badge">📱 ${poll.platform}</div>
                    <div class="trending-stats">
                        <span class="trending-mentions">${Object.values(poll.votes).reduce((a, b) => a + b, 0)} votes</span>
                        <span style="color: var(--color-primary);">${Math.round(Math.random() * 12 + 2)} hours ago</span>
                    </div>
                    <div style="margin-top: 8px; font-size: 12px;">${Object.entries(poll.votes).map(([option, count]) => `<span style="margin-right: 12px;">${option}: ${count}</span>`).join('')}</div>
                </div>`).join('');
        }

        // Groups Feature
        function joinGroups() {
            showToast('👥 Opening Shopping Groups...', 'info');
            showScreen('groupsScreen');
        }

        function joinGroup(groupId, event) {
            const card = event.target.closest('.group-card');
            if (card.classList.contains('joined')) {
                showToast('You are already in this group!', 'info');
                return;
            }
            const groupName = card.querySelector('.group-info h3').textContent;
            
            if (confirm(`Do you want to join the "${groupName}" group?`)) {
                showToast(`👥 Joining ${groupName}...`, 'info');
                setTimeout(() => {
                    showToast(`✅ Successfully joined ${groupName}!`, 'success');
                    card.classList.add('joined');
                }, 1000);
            }
        }

        function createShoppingGroup() {
            showToast('👥 Creating new shopping group...', 'info');
            setTimeout(() => {
                const groupName = prompt('What would you like to name your shopping group?', 'My Shopping Community');
                if (groupName) {
                    showToast(`🎉 "${groupName}" created successfully! Invite friends to join your community.`, 'success');
                }
            }, 500);
        }

        function groupDeals() {
            showToast('💎 Loading exclusive group deals...', 'info');
            setTimeout(() => { showToast('💎 Found 15 exclusive deals for group members!', 'success'); }, 1000);
        }

        function sharedWishlists() {
            showToast('📝 Opening collaborative shopping lists...', 'info');
            setTimeout(() => { showToast('📝 You have 3 shared wishlists with your friends.', 'info'); }, 1000);
        }

        // Trends Feature
        function loadTrendsScreen() {
            const trendsGrid = document.getElementById('trendsGridPage');
            const trendingData = [
                { name: 'Viral Skincare Routine', platform: 'Instagram', mentions: '2.5M', trend: '#GlowUp2025' },
                { name: 'Budget Tech Hauls', platform: 'TikTok', mentions: '1.8M', trend: '#TechFinds' },
                { name: 'Home Aesthetic DIY', platform: 'YouTube', mentions: '980K', trend: '#HomeVibes' },
                { name: 'Sustainable Fashion', platform: 'Twitter', mentions: '750K', trend: '#SustainableStyle' }
            ];
            trendsGrid.innerHTML = trendingData.map(trend => `<div class="trending-card"><div class="trending-header"><div class="trending-name">${trend.name}</div><div class="trending-price">Live</div></div><div class="platform-badge">${getPlatformIcon(trend.platform)} ${trend.platform}</div><div class="trending-stats"><span class="trending-mentions">${trend.mentions} mentions</span><span style="color: var(--color-primary);">${trend.trend}</span></div></div>`).join('');
        }

        // Trending Products Functions
        function renderTrendingProducts() {
            const trendingGrid = document.getElementById('trendingGrid');
            trendingGrid.innerHTML = trendingProducts.map(product => `<div class="trending-card" onclick="exploreProduct('${product.id}')"><div class="trending-header"><div class="trending-name">${product.name}</div><div class="trending-price">${product.price}</div></div><div class="platform-badge">${getPlatformIcon(product.platform)} ${product.platform}</div><div class="trending-stats"><span class="trending-mentions">${formatMentions(product.mentions)} mentions</span><span style="color: var(--color-primary);">${product.trend}</span></div></div>`).join('');
        }

        // AI Recommendations
        function browseRecommendations() {
            showToast('✨ Analyzing your preferences for AI recommendations...', 'info');
            setTimeout(() => {
                const recommendations = ENHANCED_PRODUCT_DATABASE.slice(0, 6);
                document.getElementById('mainSearchInput').value = 'AI recommendations';
                displaySearchResults(recommendations, 'AI Personalized Recommendations');
                showToast('✨ Here are your personalized AI recommendations!', 'success');
            }, 1000);
        }

        // Product Actions
        function quickBuy(productId) {
            const product = ENHANCED_PRODUCT_DATABASE.find(p => p.id === productId);
            showToast(`🛒 Added "${product.name}" to cart!`, 'success');
        }

        function askCommunity(productName, price) {
            showToast(`📊 Creating poll: "Should I buy ${productName} for ₹${price.toLocaleString()}?"`, 'success');
        }
        function shareProduct(productId) {
            const product = ENHANCED_PRODUCT_DATABASE.find(p => p.id === productId);
            if (navigator.share) {
                navigator.share({
                    title: product.name,
                    text: `Check out this ${product.vibe} product: ${product.name} for ₹${product.price.toLocaleString()}`,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(`Check out ${product.name} - ₹${product.price.toLocaleString()}`);
                showToast('✅ Product link copied to clipboard!', 'success');
            }
        }

        function viewProduct(productId) {
            const product = ENHANCED_PRODUCT_DATABASE.find(p => p.id === productId);
            console.log('Viewing product:', product);
            showToast(`👁️ Viewing "${product.name}"`, 'info');
        }

        function exploreProduct(productId) {
            showToast('🔍 Exploring trending product...', 'info');
        }

        // Utility Functions
        function formatMentions(count) {
            if (count >= 1000000) return (count / 1000000).toFixed(1) + 'M';
            if (count >= 1000) return (count / 1000).toFixed(1) + 'K';
            return count.toString();
        }

        function getPlatformIcon(platform) {
            const icons = { 'Instagram': '📷', 'YouTube': '📺', 'Twitter': '🐦', 'WhatsApp': '💬', 'TikTok': '🎵' };
            return icons[platform] || '🌐';
        }

        function showLoading(show) {
            document.getElementById('loading').classList.toggle('show', show);
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `status-message status-${type}`;
            toast.innerHTML = message; // Use innerHTML to render line breaks
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 5000); // Increased duration for readability
        }

        // Screen Management
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            const btnId = { homeScreen: 'homeBtn', trendsScreen: 'trendsBtn', pollsScreen: 'pollsBtn', groupsScreen: 'groupsBtn' }[screenId];
            if(btnId) document.getElementById(btnId).classList.add('active');
            
            if (screenId === 'pollsScreen') loadRecentPolls();
            if (screenId === 'trendsScreen') loadTrendsScreen();
        }

        // Initialize Application
        function initializeApp() {

    document.getElementById('mainSearchInput').addEventListener('keypress', e => { if (e.key === 'Enter') performSmartSearch(); });
    document.getElementById('brandTitle').addEventListener('click', () => showScreen('homeScreen'));
    document.getElementById('mainSearchInput').addEventListener('keypress', e => { if (e.key === 'Enter') performSmartSearch(); });
    document.getElementById('homeBtn').addEventListener('click', () => showScreen('homeScreen'));
    document.getElementById('trendsBtn').addEventListener('click', () => showScreen('trendsScreen'));
    document.getElementById('pollsBtn').addEventListener('click', () => showScreen('pollsScreen'));
    document.getElementById('groupsBtn').addEventListener('click', () => showScreen('groupsScreen'));
    
    document.getElementById('socialSearchInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') performSocialSearch();
    });
        
    document.querySelectorAll('.platform-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            const parent = this.parentElement;
            parent.querySelectorAll('.platform-tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
        });
    });
    
    renderTrendingProducts();
    setupVoiceSearch();
    setupFilters();
    
    console.log('🚀 QwikPik AI Engine Enhanced - All Features Loaded Successfully!');
}
document.addEventListener('DOMContentLoaded', initializeApp);

</script>


<!-- Recruiter Contact Modal -->
<div id="recruiterModal" class="recruiter-modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
      <h2 class="modal-title">🚀 Are you Hiring PM/APM?</h2>
<p style="color: #666; margin-bottom: 25px;">
    Interested in my work and looking to hire a Product Manager? 
</p>

<div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #4285f4;">
    <h4 style="margin: 0 0 15px 0; color: #333; font-size: 16px;">📞 Get in Touch:</h4>
   <div style="display: flex; flex-direction: column; gap: 8px; font-size: 14px; color: #555;">
    <div>📧 <strong>Email:</strong> tiwariayush77@gmail.com</div>
    <div>💼 <strong>LinkedIn:</strong> <a href="https://linkedin.com/in/tiwariayush77" target="_blank" style="color: #0077b5; text-decoration: none; font-weight: 500;">linkedin.com/in/tiwariayush77</a></div>
    <div>📄 <strong>Portfolio:</strong> <a href="https://tiwariayush77.github.io/QwikPik-prototype/" target="_blank" style="color: #4285f4; text-decoration: none; font-weight: 500;">https://tiwariayush77.github.io/QwikPik-prototype</a></div>
    <div>📋 <strong>Resume:</strong> <a href="https://drive.google.com/file/d/10sfJ7Xakgcx2eiABVoX5KZL_vObYU1Gy/view?usp=sharing" target="_blank" style="color: #28a745; text-decoration: none; font-weight: 600;">📄 View Resume</a></div>
</div>

</div>

<p style="color: #666; margin-bottom: 25px; text-align: left;">
    <strong>Let's discuss how I can contribute to your team!</strong>
</p>


        
          </div>
</div>

<!-- Floating Action Button to Trigger Modal -->
<div id="recruiterFab">
    💼 Hire Me as PM?
</div>

<script>
// SIMPLE WORKING MODAL
(function() {
    function initModal() {
        console.log('🚀 Initializing modal...');
        
        const modal = document.getElementById('recruiterModal');
        const fab = document.getElementById('recruiterFab');
        const closeBtn = document.querySelector('.close-btn');

        if (!modal || !fab || !closeBtn) {
            console.error('❌ Missing elements');
            return;
        }

        // Simple click handler
        fab.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('📱 Opening modal...');
            modal.classList.add('show');
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        });

        // Simple close handler
        function closeModal() {
            console.log('📱 Closing modal...');
            modal.classList.remove('show');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        closeBtn.addEventListener('click', closeModal);
        
        // Close on backdrop click
        modal.addEventListener('click', function(e) {
            if (e.target === modal) closeModal();
        });

        console.log('✅ Modal ready!');
    }

    // Initialize when ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initModal);
    } else {
        initModal();
    }
})();


</script>


</body>
</html>
